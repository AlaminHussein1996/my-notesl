<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ржбрж╛рзЯрзЗрж░рж┐</title>

<link rel="icon" type="image/png" href="logo.png">
<link rel="apple-touch-icon" href="logo.png">
<link rel="manifest" href="manifest.json">

<style>
:root{
    --bg:#000;
    --card:#1a1a1a;
    --primary:#00ffcc;
    --text:#fff;
}
body{
    margin:0;
    font-family:'Segoe UI',Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
}

/* PIN Screen */
#pinArea{
    position:fixed;
    inset:0;
    background:#000;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:2000;
}
.app-logo{
    width:120px;
    border-radius:25px;
    margin-bottom:20px;
    box-shadow:0 0 20px rgba(0,255,204,.3);
}

.container{
    width:95%;
    max-width:450px;
    background:var(--card);
    padding:20px;
    border-radius:25px;
    border:1px solid #333;
    display:none;
}

.header-tools{
    display:flex;
    justify-content:space-between;
    margin-bottom:15px;
}

select,input,.btn{
    background:#262626;
    color:var(--primary);
    border:1px solid #444;
    padding:12px;
    border-radius:12px;
    outline:none;
}

textarea{
    width:100%;
    height:400px;
    background:#111;
    color:#eee;
    border:1px solid #333;
    border-radius:15px;
    padding:15px;
    box-sizing:border-box;
    font-size:16px;
    resize:none;
    line-height:1.6;
}

#settingsPanel{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.95);
    padding:20px;
    overflow-y:auto;
}

.settings-content{
    max-width:400px;
    margin:auto;
    background:#1a1a1a;
    padding:20px;
    border-radius:20px;
    border:1px solid var(--primary);
}
.setting-item{
    margin-bottom:15px;
}
.setting-item label{
    font-size:12px;
    color:#888;
    display:block;
    margin-bottom:5px;
}
</style>
</head>
<body>

<div id="pinArea">
    <img src="logo.png" class="app-logo">
    <h2 style="color:var(--primary)">ржбрж╛рзЯрзЗрж░рж┐</h2>
    <input type="password" id="pinInput" maxlength="8" placeholder="рзо рж╕ржВржЦрзНржпрж╛рж░ ржкрж┐ржи ржжрж┐ржи" style="text-align:center;font-size:20px;width:200px;">
    <button class="btn" onclick="handlePin()" style="margin-top:15px;width:150px;background:var(--primary);color:#000;font-weight:bold;">
        ржЖржирж▓ржХ ржХрж░рзБржи
    </button>
</div>

<div class="container" id="mainApp">
    <div class="header-tools">
        <select id="pageSelect" onchange="switchPage()"></select>
        <button class="btn" onclick="toggleSettings()">тЪЩя╕П</button>
    </div>

    <h2 id="displayTitle" style="text-align:center;color:var(--primary)">ржбрж╛рзЯрзЗрж░рж┐</h2>
    <textarea id="noteInput" placeholder="ржПржЦрж╛ржирзЗ рж▓рж┐ржЦрзБржи..."></textarea>

    <div id="status" style="text-align:center;font-size:12px;color:#666;margin-top:10px;">
        рж╕ржм рж╕рзЗржн ржЖржЫрзЗ
    </div>

    <button class="btn" style="width:100%;margin-top:10px;color:#ff4d4d;border-color:#ff4d4d;"
        onclick="clearNote()">ЁЯЧСя╕П рж╕ржм ржорзБржЫрзБржи</button>
</div>

<div id="settingsPanel">
    <div class="settings-content">
        <h3 style="color:var(--primary)">тЪЩя╕П ржЦрж╛рждрж╛рж░ ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи</h3>
        <div id="inputsContainer"></div>

        <button class="btn" style="width:100%;background:var(--primary);color:#000;"
            onclick="toggleSettings()">ржмржирзНржз ржХрж░рзБржи</button>

        <button class="btn" style="width:100%;margin-top:10px;border-color:#ff4d4d;color:#ff4d4d;"
            onclick="changePin()">ржкрж┐ржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи</button>
    </div>
</div>

<script>
const pageSelect = document.getElementById('pageSelect');
const inputsContainer = document.getElementById('inputsContainer');
const noteInput = document.getElementById('noteInput');
const displayTitle = document.getElementById('displayTitle');
const status = document.getElementById('status');

/* PIN SYSTEM */
function handlePin(){
    const pinInput = document.getElementById('pinInput');
    const pin = pinInput.value;
    const saved = localStorage.getItem('diary_pin');

    if(!saved){
        if(/^\d{8}$/.test(pin)){
            localStorage.setItem('diary_pin', pin);
            alert("ржкрж┐ржи рж╕ржлрж▓ржнрж╛ржмрзЗ рж╕рзЗржЯ рж╣рзЯрзЗржЫрзЗ! ржПржЯрж┐ ржоржирзЗ рж░рж╛ржЦрзБржиред");
            showApp();
        } else alert("ржирждрзБржи рзо рж╕ржВржЦрзНржпрж╛рж░ ржкрж┐ржи ржжрж┐ржи (рж╢рзБржзрзБ рж╕ржВржЦрзНржпрж╛)");
    } else {
        if(pin === saved) showApp();
        else {
            alert("ржнрзБрж▓ ржкрж┐ржи!");
            pinInput.value = ""; // ржкрж┐ржи ржнрзБрж▓ рж╣рж▓рзЗ ржмржХрзНрж╕ ржЦрж╛рж▓рж┐ ржХрж░рзЗ ржжрж┐ржмрзЗ
        }
    }
}

function showApp(){
    document.getElementById('pinArea').style.display='none';
    document.getElementById('mainApp').style.display='block';
    init();
}

function changePin(){
    let current = prompt("рж╕рзБрж░ржХрзНрж╖рж╛рж░ ржЬржирзНржп ржЖржкржирж╛рж░ ржмрж░рзНрждржорж╛ржи ржкрж┐ржи ржжрж┐ржи:");
    if(current !== localStorage.getItem('diary_pin')){
        alert("ржнрзБрж▓ ржмрж░рзНрждржорж╛ржи ржкрж┐ржи! ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╕ржорзНржнржм ржирзЯред");
        return;
    }

    let newPin = prompt("ржирждрзБржи рзо рж╕ржВржЦрзНржпрж╛рж░ ржкрж┐ржи ржжрж┐ржи:");
    if(/^\d{8}$/.test(newPin)){
        localStorage.setItem('diary_pin', newPin);
        alert("ржкрж┐ржи рж╕ржлрж▓ржнрж╛ржмрзЗ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯрзЗржЫрзЗред");
    } else alert("ржкрж┐ржи ржЕржмрж╢рзНржпржЗ рзо рж╕ржВржЦрзНржпрж╛рж░ рж╣рждрзЗ рж╣ржмрзЗред");
}

/* NOTE SYSTEM */
function init(){
    inputsContainer.innerHTML='';
    pageSelect.innerHTML='';

    for(let i=1;i<=10;i++){
        let name = localStorage.getItem('diary_name_p'+i) || 'ржЦрж╛рждрж╛ '+i;

        let opt=document.createElement('option');
        opt.value=i;
        opt.textContent=name;
        pageSelect.appendChild(opt);

        let div=document.createElement('div');
        div.className='setting-item';
        div.innerHTML=`
            <label>ржЦрж╛рждрж╛ ${i}:</label>
            <input type="text" value="${name}" 
            oninput="updateName(${i},this.value)">`;
        inputsContainer.appendChild(div);
    }

    pageSelect.value=1;  
    loadPage();
}

function updateName(num,newName){
    localStorage.setItem('diary_name_p'+num,newName);
    // ржбрзНрж░ржкржбрж╛ржЙржи ржорзЗржирзБ ржжрзНрж░рзБржд ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп
    const options = pageSelect.options;
    for(let i=0; i<options.length; i++){
        if(options[i].value == num){
            options[i].textContent = newName;
            break;
        }
    }
    // ржпржжрж┐ ржмрж░рзНрждржорж╛ржи ржкрзЗржЬ ржПржбрж┐ржЯ ржХрж░рж╛ рж╣рзЯ, рждржмрзЗ ржЯрж╛ржЗржЯрзЗрж▓ ржЖржкржбрзЗржЯ рж╣ржмрзЗ
    if(pageSelect.value == num){
        displayTitle.innerText = newName;
    }
}

function loadPage(){
    const p=pageSelect.value;
    noteInput.value=localStorage.getItem('diary_content_p'+p)||"";
    displayTitle.innerText=localStorage.getItem('diary_name_p'+p)||'ржЦрж╛рждрж╛ '+p;
}

function switchPage(){
    loadPage();
    status.innerText="ржЦрж╛рждрж╛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯрзЗржЫрзЗ";
}

noteInput.addEventListener('input',()=>{
    localStorage.setItem('diary_content_p'+pageSelect.value,noteInput.value);
    status.innerText="рж╕рзЗржн рж╣ржЪрзНржЫрзЗ...";
    setTimeout(()=>status.innerText="рж╕ржм рж╕рзЗржн ржЖржЫрзЗ",500);
});

function toggleSettings(){
    const panel=document.getElementById('settingsPanel');
    panel.style.display=(panel.style.display==='block')?'none':'block';
}

function clearNote(){
    if(confirm("ржПржЗ ржЦрж╛рждрж╛рж░ рж╕ржм рж▓рзЗржЦрж╛ ржХрж┐ ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ ржЪрж╛ржи?")){
        noteInput.value="";
        localStorage.removeItem('diary_content_p'+pageSelect.value);
    }
}

window.onload=()=>{
    if(!localStorage.getItem('diary_pin')){
        document.querySelector('#pinArea h2').innerText="ржирждрзБржи ржкрж┐ржи рж╕рзЗржЯ ржХрж░рзБржи";
    }
};
</script>
</body>
</html>
